<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>대리점 정보</title>
    <!-- Latest compiled and minified CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
<!--전체 컨테이너-->
<div class="container min-vw-100 w-100" >
    <div style="text-align: center" class="my-5">
        <span class="fs-1" th:text="${agencyInfo.getName()}">대리점명</span>
    </div>

<!--    대리점 정보-->
    <div class="container mt-5 w-100">
        <span class="fs-2">대리점 정보</span>
    </div>
    <div class="container my-3 min-vw-50 w-50">
        <table class="table fs-6">
            <tbody th:object="${agencyInfo}">
                <tr>
                    <th>점포코드</th>
                    <th>상태</th>
                </tr>
                <tr>
                    <td th:text="*{getAgencyCode()}">점포코드</td>
                    <td th:text="*{getStatus().getValue()}">상태</td>
                </tr>
                <tr>
                    <th colspan="2">위치</th>
                </tr>
                <tr>
                    <td colspan="2" th:if="*{getPostalCode() != null}" th:utext="*{'(' + getPostalCode() + ')' + '&lt;br&gt;' + getAddress() +'&lt;br&gt;' + getAddressDetail() }">(우편번호)주소</td>
                    <td colspan="2" th:unless="*{getPostalCode() != null}"th:utext="*{'(' + '&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp' + ')' + '&lt;br&gt;' + getAddress() +'&lt;br&gt;' + getAddressDetail() }">(우편번호)주소</td>
                </tr>
                <tr>
                    <th>매장번호</th>
                    <th>팩스</th>
                </tr>
                <tr>
                    <td th:text="*{getTelephone()}">매장번호</td>
                    <td th:text="*{getFax()}">팩스</td>

                </tr>
                <tr>
                    <th>매니저 이름</th>
                    <th>매니저 전화번호</th>
                </tr>
                <tr>
                    <td th:text="*{getManagerName()}">매니저 이름</td>
                    <td th:text="*{getManagerPhone()}">매니저 전화번호</td>

                </tr>
            </tbody>
        </table>
    </div>

    <!--  관리 지역 리스트-->
    <div class="container mt-5 w-100">
        <span class="fs-2">관리 지역</span>
    </div>
    <div class="container my-3 min-vw-50 w-50">
        <table class="table fs-6">
            <thead>
            <tr>
                <th>본부</th>
                <th>지역</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="control : ${agencyInfo.getAgencyControlList()}">
                <td th:text="${control.getLocation().getHeadOfficeCode()}">headOffice</td>
                <td th:text="${control.getLocation().getAreaCode()}">area</td>
            </tr>
            </tbody>

        </table>
    </div>

<!--    엔지니어 리스트-->
    <div class="container mt-5 w-100">
        <span class="fs-2">소속 엔지니어</span>
    </div>
    <div class="container my-3 min-vw-100 w-100">
        <table class="table fs-6">
            <thead>
            <tr>
                <th>id</th>
                <th>이름</th>
                <th>나이</th>
                <th>전화번호</th>
                <th>입사일</th>
                <th>퇴사일</th>
                <th>상태</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="engineer : ${agencyInfo.getEngineerList()}">
                <td th:text="${engineer.getId()}">id</td>
                <td th:text="${engineer.getName()}">이름</td>
                <td th:text="${engineer.getAge()}">나이</td>
                <td th:text="${engineer.getPhone()}">전화번호</td>
                <td th:text="${#temporals.format(engineer.getJoinDate(), 'yyyy-MM-dd HH:mm')}">입사일</td>
                <td th:text="${#temporals.format(engineer.getResignationDate(), 'yyyy-MM-dd HH:mm')}">퇴사일</td>
                <td th:text="${engineer.getEngineerStatus()}">상태</td>
            </tr>
            </tbody>

        </table>
    </div>

    <!--  과거 장애내역  -->
    <div class="container mt-5 w-100">
        <span class="fs-2">최근 할당된 장애내역</span>
    </div>
    <div class="container my-3 min-vw-100 w-100">
        <table class="table fs-6">
            <thead>
            <tr>
                <th>id</th>
                <th>접수일</th>
                <th>완료일</th>
                <th>처리방법</th>
                <th>처리상태</th>
                <th>장애타입</th>
                <th>고객이름</th>
                <th>고객전화번호</th>
                <th>특이사항</th>
                <th>엔지니어 아이디</th>
                <th>엔지니어 이름</th>
                <th>엔지니어 상태</th>
                <!--                <th>정기점검 여부</th>-->
                <th>담당직원 id</th>
                <th>담당직원 이름</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="incident : ${agencyInfo.getIncidentHistoryDtoList()}">
                <td th:text="${incident.getIncidentId()}">id</td>
                <td th:text="${#temporals.format(incident.getCreateDate(), 'yyyy-MM-dd HH:mm')}">접수일</td>
                <td th:text="${#temporals.format(incident.getCompletionDate(), 'yyyy-MM-dd HH:mm')}">완료일</td>
                <td th:text="${incident.getProcessMethod().getValue()}">처리방법</td>
                <td th:text="${incident.getProcessStatus().getValue()}">처리상태</td>
                <td th:text="${incident.getIncidentType().getLarge() + ' / ' + incident.getIncidentType().getMedium() + ' / ' + incident.getIncidentType().getSmall()}">장애타입</td>
                <td th:text="${incident.getCustomerName()}">고객이름</td>
                <td th:text="${incident.getCustomerPhone()}">고객전화번호</td>
                <td th:text="${incident.getText()}">특이사항</td>
                <td th:text="${incident.getEngineerId()}">엔지니어 아이디</td>
                <td th:text="${incident.getEngineerName()}">엔지니어 이름</td>
                <td th:text="${incident.getEngineerStatus()}">엔지니어 상태</td>
                <!--                    <td th:text="${incident.get}">정기점검 여부</td>-->
                <td th:text="${incident.getEmployeeId()}">담당직원 id</td>
                <td th:text="${incident.getEmployeeName()}">담당직원 이름</td>
            </tr>
            </tbody>

        </table>

        <div style="text-align: center">
            <div style="display: inline-block">
                <!--하단 네비게이션-->
                <nav aria-label="Page navigation example">
                    <ul class="pagination">

                        <th:block>
                            <li class="page-item" th:classappend="${!paging.isEnablePrev() ? 'disabled' : _}">
                                <a class="page-link" href="#" th:href="@{{agencycode}(agencycode=${agencyInfo.getAgencyCode()}, page=1)}" aria-label="First">
                                    <span aria-hidden="true">&laquo;</span>
                                </a>
                            </li>

                            <li class="page-item" th:classappend="${!paging.isEnablePrev() ? 'disabled' : _}">
                                <a class="page-link" href="#" th:href="@{{agencycode}(agencycode=${agencyInfo.getAgencyCode()}, page=${paging.getCurrentPage()}-1)}" aria-label="Previous">
                                    <span aria-hidden="true">&lt;</span>
                                </a>
                            </li>
                        </th:block>

                        <th:block th:each="number:${#numbers.sequence(paging.getStartPage(), paging.getEndPage())}">
                            <li class="page-item" th:if="${number==paging.getCurrentPage()}" th:classappend="active">
                                <a class="page-link" href="#" th:href="@{{agencycode}(agencycode=${agencyInfo.getAgencyCode()}, page=${number})}" th:text="${number}">1</a>
                            </li>
                            <li class="page-item" th:if="${number!=paging.getCurrentPage()}" th:classappend="${number > paging.getMaxSize() ? 'disabled' : _}">
                                <a class="page-link" href="#" th:href="@{{agencycode}(agencycode=${agencyInfo.getAgencyCode()}, page=${number})}" th:text="${number}">1</a>
                            </li>
                        </th:block>

                        <th:block>
                            <li class="page-item" th:classappend="${!paging.isEnableNext() ? 'disabled' : _}">
                                <a class="page-link" href="#" th:href="@{{agencycode}(agencycode=${agencyInfo.getAgencyCode()}, page=${paging.getCurrentPage()}+1)}" aria-label="Next">
                                    <span aria-hidden="true">&gt;</span>
                                </a>
                            </li>
                            <li class="page-item" th:classappend="${!paging.isEnableNext() ? 'disabled' : _}">
                                <a class="page-link" href="#" th:href="@{{agencycode}(agencycode=${agencyInfo.getAgencyCode()}, page=${paging.getMaxSize()})}" aria-label="End">
                                    <span aria-hidden="true">&raquo;</span>
                                </a>
                            </li>
                        </th:block>

                    </ul>
                </nav>

            </div>
        </div>
    </div>
</div>
</body>
</html>